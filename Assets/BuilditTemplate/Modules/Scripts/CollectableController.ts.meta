fileFormatVersion: 2
guid: fe5ff949ec52453293ab31757efd49d5
importerOverride:
  nativeImporterType: 2089858483
  scriptedImporterType:
    serializedVersion: 2
    Hash: 89072204048b7087d871d10c191cb608
ScriptedImporter:
  internalIDToNameTable: []
  externalObjects: {}
  serializedVersion: 2
  userData: 
  assetBundleName: 
  assetBundleVariant: 
  script: {fileID: -1123457745, guid: 54cf806323ffe4418a4ce4cc63fe6b9d, type: 3}
  isAssemblyDeclarations: 0
  assembly: 
  generateAllTypes: 1
  types: []
  generateWrapper: 0
  overrideWrapperTypes: 0
  wrapperTypes: []
  WrapperFilters: []
  wrapperOutputDirectory: Generated
  compiledResult: '{"source":"\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\",
    { value: true });\r\nconst ZEPETO_Script_1 = require(\"ZEPETO.Script\");\r\nconst
    UnityEngine_1 = require(\"UnityEngine\");\r\nconst ZEPETO_Module_Event_1 = require(\"ZEPETO.Module.Event\");\r\nconst
    Chest_1 = require(\"./Chest\");\r\nconst CollectableManager_1 = require(\"./CollectableManager\");\r\nconst
    UnityEngine_UI_1 = require(\"UnityEngine.UI\");\r\nconst InteractionIcon_1 =
    require(\"./../Interaction/ZepetoScript/InteractionIcon\");\r\nclass CollectableController
    extends ZEPETO_Script_1.ZepetoScriptBehaviour {\r\n    constructor() {\r\n       
    super(...arguments);\r\n        // Delay before the collectable object can be
    obtained\r\n        this.timeout = 60;\r\n        this._chestFound = false;\r\n   
    }\r\n    Start() {\r\n        this._interactionButton = this.GetComponent($typeof(InteractionIcon_1.default));\r\n       
    this._collectableObject = this.GetComponent($typeof(ZEPETO_Module_Event_1.CurrencyEventCollectableObject));\r\n       
    this._chest = this.chest.GetComponent($typeof(Chest_1.default));\r\n        this._interactionButton.OnClickEvent.AddListener(()
    => {\r\n            this.Collect();\r\n        });\r\n    }\r\n    Collect()
    {\r\n        if (this._isCollected)\r\n            return;\r\n        if (this._chestFound
    == false) {\r\n            CollectableManager_1.default.instance.ChestFound();\r\n           
    this._chestFound = true;\r\n        }\r\n        if (this.timeout > 0) {\r\n           
    this.StartTimer();\r\n            return;\r\n        }\r\n        if (CollectableManager_1.default.instance.Collect(this)
    == false)\r\n            return;\r\n        this._interactionButton.HideIcon();\r\n       
    this._interactionButton.enabled = false;\r\n    }\r\n    StartTimer() {\r\n       
    if (this.isWaiting)\r\n            return;\r\n        this.isWaiting = true;\r\n       
    this._interactionButton.HideIcon();\r\n        this._interactionButton.enabled
    = false;\r\n        this._coTimer = this.StartCoroutine(this.Step());\r\n   
    }\r\n    *Step() {\r\n        while (this.isWaiting) {\r\n            this.countdown.text
    = `${this.timeout}`;\r\n            yield new UnityEngine_1.WaitForSeconds(1);\r\n           
    // Update UI\r\n            this.timeout -= 1;\r\n            if (this.timeout
    < 1)\r\n                this.EndTimer();\r\n        }\r\n    }\r\n    EndTimer()
    {\r\n        this.isWaiting = false;\r\n        this.countdown.gameObject.SetActive(false);\r\n       
    this._interactionButton.ShowIcon();\r\n        this._interactionButton.enabled
    = true;\r\n        let button = this._interactionButton.gameObject.GetComponentInChildren($typeof(UnityEngine_UI_1.Button));\r\n       
    let colors = button.colors.get_Clone();\r\n        colors.normalColor = this.activatedIconColor;\r\n       
    button.colors = colors;\r\n    }\r\n    OnCollected(success) {\r\n        this._isCollected
    = success;\r\n        this.StartCoroutine(this.OnEventSuccess());\r\n       
    this.chest.GetComponent($typeof(Chest_1.default))?.gold.gameObject.SetActive(success);\r\n   
    }\r\n    *OnEventSuccess() {\r\n        yield new UnityEngine_1.WaitForEndOfFrame();\r\n       
    this._chest.Open(true);\r\n        this.sparkle.SetActive(false);\r\n    }\r\n}\r\nexports.default
    = CollectableController;\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ29sbGVjdGFibGVDb250cm9sbGVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiQ29sbGVjdGFibGVDb250cm9sbGVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsaURBQXFEO0FBRXJELDZDQVFxQjtBQUVyQiw2REFBNkY7QUFDN0YsbUNBQTRCO0FBRTVCLDZEQUFzRDtBQUN0RCxtREFBNEM7QUFDNUMsbUZBQTRFO0FBRzVFLE1BQXFCLHFCQUFzQixTQUFRLHFDQUFxQjtJQUF4RTs7UUFXSSxzREFBc0Q7UUFDL0MsWUFBTyxHQUFXLEVBQUUsQ0FBQztRQUVwQixnQkFBVyxHQUFZLEtBQUssQ0FBQztJQW1HekMsQ0FBQztJQXBGVyxLQUFLO1FBQ1QsSUFBSSxDQUFDLGtCQUFrQixHQUFHLElBQUksQ0FBQyxZQUFZLFNBQUMseUJBQWUsRUFBRyxDQUFDO1FBQy9ELElBQUksQ0FBQyxrQkFBa0IsR0FBRyxJQUFJLENBQUMsWUFBWSxTQUFDLG9EQUE4QixFQUFHLENBQUM7UUFDOUUsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLFlBQVksU0FBQyxlQUFLLEVBQUcsQ0FBQztRQUUvQyxJQUFJLENBQUMsa0JBQWtCLENBQUMsWUFBWSxDQUFDLFdBQVcsQ0FBQyxHQUFHLEVBQUU7WUFDbEQsSUFBSSxDQUFDLE9BQU8sRUFBRSxDQUFDO1FBQ25CLENBQUMsQ0FBQyxDQUFDO0lBQ1AsQ0FBQztJQUVPLE9BQU87UUFFWCxJQUFJLElBQUksQ0FBQyxZQUFZO1lBQ2pCLE9BQU87UUFFWCxJQUFJLElBQUksQ0FBQyxXQUFXLElBQUksS0FBSyxFQUFFO1lBQzNCLDRCQUFrQixDQUFDLFFBQVEsQ0FBQyxVQUFVLEVBQUUsQ0FBQztZQUN6QyxJQUFJLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQztTQUMzQjtRQUVELElBQUksSUFBSSxDQUFDLE9BQU8sR0FBRyxDQUFDLEVBQUU7WUFDbEIsSUFBSSxDQUFDLFVBQVUsRUFBRSxD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","assetPath":"Assets/BuilditTemplate/Modules/Scripts/CollectableController.ts","manifest":{"properties":[{"assembly":"UnityEngine.CoreModule","name":"sparkle","type":"UnityEngine.GameObject","isArray":false,"initValue":[],"enumKeys":[],"enumValues":[],"attributes":[]},{"assembly":"UnityEngine.CoreModule","name":"chest","type":"UnityEngine.GameObject","isArray":false,"initValue":[],"enumKeys":[],"enumValues":[],"attributes":[]},{"assembly":"Unity.TextMeshPro","name":"countdown","type":"TMPro.TextMeshPro","isArray":false,"initValue":[],"enumKeys":[],"enumValues":[],"attributes":[]},{"assembly":"mscorlib","name":"timeout","type":"System.Single","isArray":false,"initValue":["60"],"enumKeys":[],"enumValues":[],"attributes":[]},{"assembly":"mscorlib","name":"isWaiting","type":"System.Boolean","isArray":false,"initValue":[],"enumKeys":[],"enumValues":[],"attributes":[]},{"assembly":"UnityEngine.CoreModule","name":"activatedIconColor","type":"UnityEngine.Color","isArray":false,"initValue":[],"enumKeys":[],"enumValues":[],"attributes":[]}],"name":"CollectableController","description":"","hasAnimatorMove":false},"isCompiled":true}'
  typescriptHash: c381a852b25f74781b91959c5ac830d9
  onlyWriteTrigger: 0
