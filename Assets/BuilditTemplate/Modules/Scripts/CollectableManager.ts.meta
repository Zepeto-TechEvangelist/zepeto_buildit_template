fileFormatVersion: 2
guid: 587b45bf52384966909a98d5f7ec1f09
importerOverride:
  nativeImporterType: 2089858483
  scriptedImporterType:
    serializedVersion: 2
    Hash: 89072204048b7087d871d10c191cb608
ScriptedImporter:
  internalIDToNameTable: []
  externalObjects: {}
  serializedVersion: 2
  userData: 
  assetBundleName: 
  assetBundleVariant: 
  script: {fileID: -1123457745, guid: 54cf806323ffe4418a4ce4cc63fe6b9d, type: 3}
  isAssemblyDeclarations: 0
  assembly: 
  generateAllTypes: 1
  types: []
  generateWrapper: 0
  overrideWrapperTypes: 0
  wrapperTypes: []
  WrapperFilters: []
  wrapperOutputDirectory: Generated
  compiledResult: '{"source":"\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\",
    { value: true });\r\nconst ZEPETO_Script_1 = require(\"ZEPETO.Script\");\r\nconst
    UnityEngine_1 = require(\"UnityEngine\");\r\nconst ObjectGroup_1 = require(\"./ObjectGroup\");\r\nconst
    GroupManager_1 = require(\"./GroupManager\");\r\nconst SceneManager_1 = require(\"./SceneManager\");\r\nconst
    CollectableController_1 = require(\"./CollectableController\");\r\nconst ZEPETO_World_Gui_1
    = require(\"ZEPETO.World.Gui\");\r\nconst ZEPETO_World_Gui_ZepetoToast_1 = require(\"ZEPETO.World.Gui.ZepetoToast\");\r\nconst
    ZEPETO_Module_Event_1 = require(\"ZEPETO.Module.Event\");\r\nclass CollectableManager
    extends ZEPETO_Script_1.ZepetoScriptBehaviour {\r\n    static get instance()
    {\r\n        if (this.m_instance === null) {\r\n            this.m_instance =
    UnityEngine_1.GameObject.FindObjectOfType($typeof(CollectableManager));\r\n           
    if (this.m_instance === null) {\r\n                this.m_instance = new UnityEngine_1.GameObject(CollectableManager.name).AddComponent($typeof(CollectableManager));\r\n           
    }\r\n        }\r\n        return this.m_instance;\r\n    }\r\n    Awake() {\r\n       
    if (CollectableManager.m_instance !== null && CollectableManager.m_instance !==
    this) {\r\n            UnityEngine_1.GameObject.Destroy(this.gameObject);\r\n       
    }\r\n        else {\r\n            CollectableManager.m_instance = this;\r\n           
    if (this.transform.parent === null)\r\n                UnityEngine_1.GameObject.DontDestroyOnLoad(this.gameObject);\r\n       
    }\r\n    }\r\n    Start() {\r\n        // TODO: Add additional logic for collectable
    groups only (now only collectable groups exist)\r\n        // Calculate number
    of possible chests in the world\r\n        let groups = GroupManager_1.default.instance.groups;\r\n       
    this.groupCount = groups.size;\r\n        SceneManager_1.default.instance.OnSceneInitialized.AddListener(()
    => {\r\n            this.StartCoroutine(this.ShowWelcome());\r\n        });\r\n   
    }\r\n    Collect(collectable) {\r\n        if (this.isCollecting)\r\n           
    return false;\r\n        this.isCollecting = true;\r\n        this.current =
    collectable;\r\n        ZEPETO_Module_Event_1.EventAPI.TryCollect((eventName,
    currencyType, amount) => {\r\n            collectable.OnCollected(true);\r\n           
    this.OnCollected(true);\r\n        }, (errorCode, errorMsg) => {\r\n           
    collectable.OnCollected(false);\r\n            this.OnCollected(false);\r\n       
    });\r\n        return true;\r\n    }\r\n    OnCollected(success) {\r\n       
    this.current = null;\r\n        this.isCollecting = false;\r\n        // this.ChestFound();\r\n   
    }\r\n    *ShowWelcome() {\r\n        if (this.groupCount < 1)\r\n           
    return;\r\n        let duration = 3;\r\n        yield new UnityEngine_1.WaitForSeconds(0.5);\r\n       
    ZEPETO_World_Gui_1.ZepetoToast.Show(ZEPETO_World_Gui_ZepetoToast_1.Type.None,
    \"Searching for hidden treasure ...\");\r\n        yield new UnityEngine_1.WaitForSeconds(duration);\r\n       
    this.StartCoroutine(this.ShowRemaining());\r\n    }\r\n    ChestFound() {\r\n       
    this.groupCount--;\r\n        this.StartCoroutine(this.ShowRemaining());\r\n   
    }\r\n    *ShowRemaining() {\r\n        ZEPETO_World_Gui_1.ZepetoToast.Show(ZEPETO_World_Gui_ZepetoToast_1.Type.None,
    this.GetLocalizedMessage());\r\n    }\r\n    GetLocalizedMessage() {\r\n       
    return this.groupCount == 0 ?\r\n            \"You found all chests!\" :\r\n           
    `There are ${this.groupCount} chests hidden in this world!`;\r\n        switch
    (UnityEngine_1.Application.systemLanguage) {\r\n            case UnityEngine_1.SystemLanguage.Korean:\r\n               
    return this.groupCount == 0 ?\r\n                    \"You found all chests!\"
    :\r\n                    `There are ${this.groupCount} chests hidden in this
    world!`;\r\n                break;\r\n            case UnityEngine_1.SystemLanguage.Japanese:\r\n               
    return `There are ${this.groupCount} chests hidden in this world!`;\r\n               
    break;\r\n            case UnityEngine_1.SystemLanguage.Chinese:\r\n           
    case UnityEngine_1.SystemLanguage.ChineseSimplified:\r\n                return
    `There are ${this.groupCount} chests hidden in this world!`;\r\n               
    break;\r\n            case UnityEngine_1.SystemLanguage.Thai:\r\n               
    return `There are ${this.groupCount} chests hidden in this world!`;\r\n               
    break;\r\n            case UnityEngine_1.SystemLanguage.Indonesian:\r\n               
    return `There are ${this.groupCount} chests hidden in this world!`;\r\n               
    break;\r\n            case UnityEngine_1.SystemLanguage.French:\r\n               
    return `There are ${this.groupCount} chests hidden in this world!`;\r\n               
    break;\r\n            case UnityEngine_1.SystemLanguage.English:\r\n           
    default:\r\n                return `There are ${this.groupCount} chests hidden
    in this world!`;\r\n                break;\r\n        }\r\n    }\r\n}\r\nexports.default
    = CollectableManager;\r\n/* Singleton */\r\nCollectableManager.m_instance = null;\r\n//#
    sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ29sbGVjdGFibGVNYW5hZ2VyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiQ29sbGVjdGFibGVNYW5hZ2VyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsaURBQW1EO0FBQ25ELDZDQUF1RztBQUV2RywrQ0FBd0M7QUFDeEMsaURBQTBDO0FBQzFDLGlEQUEwQztBQUMxQyxtRUFBNEQ7QUFFNUQsdURBQThFO0FBQzlFLCtFQUFrRDtBQUNsRCw2REFBMkQ7QUFHM0QsTUFBcUIsa0JBQW1CLFNBQVEscUNBQXFCO0lBaUIxRCxNQUFNLEtBQUssUUFBUTtRQUN0QixJQUFJLElBQUksQ0FBQyxVQUFVLEtBQUssSUFBSSxFQUFFO1lBQzFCLElBQUksQ0FBQyxVQUFVLEdBQUcsd0JBQVUsQ0FBQyxnQkFBZ0IsU0FBQyxrQkFBa0IsRUFBRyxDQUFDO1lBQ3BFLElBQUksSUFBSSxDQUFDLFVBQVUsS0FBSyxJQUFJLEVBQUU7Z0JBQzFCLElBQUksQ0FBQyxVQUFVLEdBQUcsSUFBSSx3QkFBVSxDQUFDLGtCQUFrQixDQUFDLElBQUksQ0FBQyxDQUFDLFlBQVksU0FBQyxrQkFBa0IsRUFBRyxDQUFDO2FBQ2hHO1NBQ0o7UUFDRCxPQUFPLElBQUksQ0FBQyxVQUFVLENBQUM7SUFDM0IsQ0FBQztJQUVPLEtBQUs7UUFDVCxJQUFJLGtCQUFrQixDQUFDLFVBQVUsS0FBSyxJQUFJLElBQUksa0JBQWtCLENBQUMsVUFBVSxLQUFLLElBQUksRUFBRTtZQUNsRix3QkFBVSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7U0FDdkM7YUFBTTtZQUNILGtCQUFrQixDQUFDLFVBQVUsR0FBRyxJQUFJLENBQUM7WUFDckMsSUFBSSxJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sS0FBSyxJQUFJO2dCQUM5Qix3QkFBVSxDQUFDLGlCQUFpQixDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQztTQUNyRDtJQUNMLENBQUM7SUFFTyxLQUFLO1FB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","assetPath":"Assets/BuilditTemplate/Modules/Scripts/CollectableManager.ts","manifest":{"properties":[{"assembly":"mscorlib","name":"isCollecting","type":"System.Boolean","isArray":false,"initValue":[],"enumKeys":[],"enumValues":[],"attributes":[]},{"assembly":"mscorlib","name":"groupCount","type":"System.Single","isArray":false,"initValue":[],"enumKeys":[],"enumValues":[],"attributes":[]},{"assembly":"","name":"collectables","type":"/Users/Mario/Development/NaverZ/zepeto_buildit_template/Assets/BuilditTemplate/Modules/Scripts/CollectableController.default","isArray":true,"initValue":[],"enumKeys":[],"enumValues":[],"attributes":[{"name":"HideInInspector","args":[]}]},{"assembly":"","name":"current","type":"/Users/Mario/Development/NaverZ/zepeto_buildit_template/Assets/BuilditTemplate/Modules/Scripts/CollectableController.default","isArray":false,"initValue":[],"enumKeys":[],"enumValues":[],"attributes":[{"name":"HideInInspector","args":[]}]}],"name":"CollectableManager","description":"","hasAnimatorMove":false},"isCompiled":true}'
  typescriptHash: ade8f92a3c0f6c7e195ced12af2a804f
  onlyWriteTrigger: 0
